(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/phoneLogin/phoneLogin"],{4338:function(e,t,n){},"43c2":function(e,t,n){"use strict";n.r(t);var r=n("9533"),s=n.n(r);for(var o in r)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(o);t["default"]=s.a},"4b30":function(e,t,n){"use strict";var r=n("4338"),s=n.n(r);s.a},9533:function(e,t,n){"use strict";(function(e){var r=n("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("2eee")),o=r(n("c973")),i=r(n("9523")),a=n("26cb"),u=n("afdd");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f={data:function(){return{active:0,showPassword:!0,tabBar:["账户登录","短信登录"],phone:"",password:"",code:"",time:60,sendCodeState:!1,timer:null,url:""}},methods:d(d({},(0,a.mapMutations)("m_users",["updateIsLogin","updateToken","updateUserInfo"])),{},{page1:function(){e.navigateTo({url:"/subpages/pages/userAgreement/index"})},page2:function(){e.navigateTo({url:"/subpages/pages/privacyAgreement/index"})},toregister:function(){this.updateIsLogin(!1)},tabChange:function(e){this.active!==e&&(this.active=e,this.password="",this.code="")},showPass:function(){this.showPassword=!this.showPassword},inputChange:function(e,t){this[t]=e.detail.value},sendCode:function(){var t=this;return(0,o.default)(s.default.mark((function n(){var r,o,i;return s.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.timer&&clearInterval(t.timer),t.sendCodeState=!0,t.timer=setInterval((function(){if(t.time<=0)return clearInterval(t.timer),t.time=60,void(t.sendCodeState=!1);t.time=t.time-1}),1e3),r={phone:t.phone,type:2},n.next=6,e.$http.post("user/code/send",r);case 6:if(o=n.sent,i=o.data,(0,u.isSuccess)(i.code)){n.next=10;break}return n.abrupt("return",e.$showMsg(i.message,1500));case 10:case"end":return n.stop()}}),n)})))()},submit:function(){var t=this.phone,n=this.password,r=this.active,s=this.code;if(!t)return e.$showMsg("请输入手机号",1500);if(t.length<11)return e.$showMsg("请输入正确的手机号",1500);if(0===r){if(!n)return e.$showMsg("请输入密码",1500);var o={phone:t,password:n};this.login("user/login/account",o)}else{if(!s)return e.$showMsg("请输入验证码",1500);var i={phone:t,code:s};this.login("user/login/sms",i)}},login:function(t,n){var r=this;return(0,o.default)(s.default.mark((function o(){var i,a;return s.default.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,e.$http.post(t,n);case 2:if(i=s.sent,a=i.data,!(0,u.isSuccess)(a.code)){s.next=10;break}r.updateToken(a.data.token),r.updateUserInfo(a.data.user),e.switchTab({url:"/pages/my/index"}),s.next=11;break;case 10:return s.abrupt("return",e.$showMsg(a.message,1500));case 11:case"end":return s.stop()}}),o)})))()}})};t.default=f}).call(this,n("543d")["default"])},bcdd:function(e,t,n){"use strict";n.r(t);var r=n("ee39"),s=n("43c2");for(var o in s)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return s[e]}))}(o);n("4b30");var i=n("f0c5"),a=Object(i["a"])(s["default"],r["b"],r["c"],!1,null,"34171cc8",null,!1,r["a"],void 0);t["default"]=a.exports},ee39:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return r}));var r={uniIcons:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-icons/components/uni-icons/uni-icons")]).then(n.bind(null,"c790"))}},s=function(){var e=this,t=e.$createElement;e._self._c;e._isMounted||(e.e0=function(t){return e.inputChange(t,"phone")},e.e1=function(t){return e.inputChange(t,"password")},e.e2=function(t){return e.inputChange(t,"code")})},o=[]}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/phoneLogin/phoneLogin-create-component',
    {
        'components/phoneLogin/phoneLogin-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("bcdd"))
        })
    },
    [['components/phoneLogin/phoneLogin-create-component']]
]);
